From be8f7268fa88d635bbb69543eadb0645c4b4a060 Mon Sep 17 00:00:00 2001
From: berbascum <berbascum@ticv.cat>
Date: Sat, 20 Jul 2024 02:16:58 +0200
Subject: [PATCH] (defconfig) fragments: Updated with an halium configs
 collection

---
 droidian/common_fragments/halium.config | 238 +++++++++++++++++++++++-
 1 file changed, 235 insertions(+), 3 deletions(-)

diff --git a/droidian/common_fragments/halium.config b/droidian/common_fragments/halium.config
index 51f1712beeea..c5a037786dff 100644
--- a/droidian/common_fragments/halium.config
+++ b/droidian/common_fragments/halium.config
@@ -1,6 +1,6 @@
-# Halium modifications
+# Halium modifications from Droidian
 
-# Halium errors
+# Halium errors fro Droidian
 CONFIG_VT=y
 CONFIG_IP_NF_MATCH_RPFILTER=y
 CONFIG_EPOLL=y
@@ -21,7 +21,7 @@ CONFIG_NETFILTER_XT_MATCH_MULTIPORT=y
 CONFIG_COMPAT_VDSO=n
 CONFIG_SECURITY_SELINUX_BOOTPARAM=y
 
-# Halium warnings
+# Halium warnings from Droidian.
 CONFIG_WATCHDOG_NOWAYOUT=n # Enable once there is dsme or an alternative
 CONFIG_NET_NS=y
 CONFIG_NET_CLS_CGROUP=y
@@ -45,6 +45,238 @@ CONFIG_IPC_NS=y
 CONFIG_NETPRIO_CGROUP=y
 CONFIG_MEMCG_KMEM=y
 CONFIG_RTC_DRV_CMOS=y
+
+## From vacummbeef)
 # stune is needed by droidian-perf.service
 CONFIG_CGROUP_SCHEDTUNE=y
 CONFIG_SCHED_TUNE=y
+
+## REQUIREDummayu crdroid by mer halium tool
+CONFIG_SYSVIPC_SYSCTL=y
+CONFIG_SYSVIPC_COMPAT=y
+CONFIG_IKCONFIG=y
+CONFIG_IKCONFIG_PROC=y
+
+## Bluetooth vayu crdroid by mer halium tool
+CONFIG_BT_RFCOMM=y
+CONFIG_BT_HCIUART_H4=y
+CONFIG_BT_HCIUART=y
+CONFIG_BT_BNEP=y
+CONFIG_BT_HIDP=y
+CONFIG_BT_BNEP_PROTO_FILTER=y
+CONFIG_BT_BNEP_MC_FILTER=y
+CONFIG_BT_HCIVHCI=y
+
+## Virtualization
+CONFIG_VIRTUALIZATION=y
+CONFIG_KVM =y
+
+## Other halium configs by mer hallium tool
+# CONFIG_LOCALVERSION_AUTO is not set
+CONFIG_LOCALVERSION="-halium"
+CONFIG_NETFILTER_NETLINK_ACCT=y
+CONFIG_AUTOFS4_FS=y
+CONFIG_IP6_NF_MATCH_AH=y
+CONFIG_SCHEDSTATS=y
+CONFIG_ISO9660_FS=y
+CONFIG_BTRFS_FS=y
+CONFIG_LOCKD=y
+CONFIG_CUSE=y
+CONFIG_LOCKD_V4=y
+CONFIG_IP6_NF_MATCH_MH=y
+CONFIG_IP6_NF_MATCH_FRAG=y
+CONFIG_BLK_DEV_NBD=y
+
+
+## DUMMIE CONSOLE
+# CONFIG_DUMMY_IRQ is not set
+# CONFIG_DUMMY is not set
+CONFIG_DUMMY_CONSOLE=y
+CONFIG_DUMMY_CONSOLE_COLUMNS=80
+CONFIG_DUMMY_CONSOLE_ROWS=25
+
+
+## SELINUX
+CONFIG_SECURITY_SELINUX=y
+CONFIG_SECURITY_SELINUX_BOOTPARAM_VALUE=0
+CONFIG_SECURITY_SELINUX_DISABLE=y
+CONFIG_SECURITY_SELINUX_DEVELOP=y
+CONFIG_SECURITY_SELINUX_AVC_STATS=y
+CONFIG_SECURITY_SELINUX_CHECKREQPROT_VALUE=1
+CONFIG_SECURITY_SELINUX_SIDTAB_HASH_BITS=9
+
+## NFS (Optional)
+CONFIG_NFS_ACL_SUPPORT=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC_GSS=y
+CONFIG_NFS_USE_KERNEL_DNS=y
+CONFIG_NFS_V4=y
+CONFIG_SUNRPC=y
+CONFIG_NFS_V4_1=y
+CONFIG_NFS_FS=y
+
+## Friendly halium configs: Verevka <verevka86@gmail.com>
+CONFIG_BINFMT_MISC=y
+CONFIG_PM_AUTOSLEEP=y
+CONFIG_USB_CONFIGFS_F_GSI=y
+CONFIG_AUDITSYSCALL=y
+CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS=y
+CONFIG_CGROUP_MEM_RES_CTLR=y
+CONFIG_CGROUP_MEM_RES_CTLR_SWAP=y
+CONFIG_CGROUP_MEM_RES_CTLR_KMEM=y
+CONFIG_CGROUPS=y
+CONFIG_USER_NS=y
+CONFIG_AUDIT_TREE=y
+CONFIG_AUDIT_WATCH=y
+CONFIG_CC_STACKPROTECTOR=y
+CONFIG_DEBUG_RODATA=y
+CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
+CONFIG_ENCRYPTED_KEYS=y
+CONFIG_FSNOTIFY=y
+CONFIG_DNOTIFY=y
+CONFIG_FANOTIFY_ACCESS_PERMISSIONS=y
+CONFIG_KEYS=y
+CONFIG_SWAP=y
+CONFIG_VT_CONSOLE=y
+CONFIG_SECURITYFS=y
+CONFIG_SECURITY_NETWORK=y
+CONFIG_NETLABEL=y
+CONFIG_SECURITY_PATH=y
+CONFIG_SECURITY_TOMOYO=y
+CONFIG_DEFAULT_SECURITY="apparmor"
+CONFIG_SECURITY_APPARMOR=y
+CONFIG_SECURITY_APPARMOR_HASH=y
+CONFIG_SECURITY_APPARMOR_UNCONFINED_INIT=y
+CONFIG_SECURITY_YAMA=y
+CONFIG_SECURITY_YAMA_STACKED=y
+CONFIG_STRICT_DEVMEM=y
+CONFIG_BT_RFCOMM_TTY=y
+CONFIG_INET_XFRM_MODE_TRANSPORT=y
+CONFIG_INET_XFRM_MODE_TUNNEL=y
+CONFIG_INET_XFRM_MODE_BEET=y
+CONFIG_IPV6=y
+CONFIG_INET6_XFRM_MODE_TRANSPORT=y
+CONFIG_INET6_XFRM_MODE_TUNNEL=y
+CONFIG_INET6_XFRM_MODE_BEET=y
+CONFIG_NETFILTER_ADVANCED=y
+CONFIG_NETFILTER_NETLINK=y
+CONFIG_NETFILTER_NETLINK_LOG=y
+CONFIG_NETFILTER_NETLINK_QUEUE=y
+CONFIG_NETFILTER_TPROXY=y
+CONFIG_NETFILTER_XTABLES=y
+CONFIG_NETFILTER_XT_MARK=y
+CONFIG_NETFILTER_XT_MATCH_ADDRTYPE=y
+CONFIG_NETFILTER_XT_MATCH_CLUSTER=y
+CONFIG_NETFILTER_XT_MATCH_CONNBYTES=y
+CONFIG_NETFILTER_XT_MATCH_CPU=y
+CONFIG_NETFILTER_XT_MATCH_DEVGROUP=y
+CONFIG_NETFILTER_XT_MATCH_ECN=y
+CONFIG_NETFILTER_XT_MATCH_HL=y
+CONFIG_NETFILTER_XT_MATCH_OSF=y
+CONFIG_NETFILTER_XT_MATCH_RATEEST=y
+CONFIG_NETFILTER_XT_MATCH_REALM=y
+CONFIG_NETFILTER_XT_MATCH_TCPMSS=y
+CONFIG_NETFILTER_XT_TARGET_AUDIT=y
+CONFIG_NETFILTER_XT_TARGET_CHECKSUM=y
+CONFIG_NETFILTER_XT_TARGET_CT=y
+CONFIG_NETFILTER_XT_TARGET_HL=y
+CONFIG_NETFILTER_XT_TARGET_LED=y
+CONFIG_NETFILTER_XT_TARGET_RATEEST=y
+CONFIG_NETFILTER_XT_TARGET_TCPOPTSTRIP=y
+CONFIG_NF_CONNTRACK_ZONES=y
+CONFIG_IP6_NF_MATCH_EUI64=y
+CONFIG_IP6_NF_MATCH_HL=y
+CONFIG_IP6_NF_MATCH_IPV6HEADER=y
+CONFIG_IP6_NF_MATCH_OPTS=y
+CONFIG_IP6_NF_MATCH_RT=y
+CONFIG_IP6_NF_QUEUE=y
+CONFIG_IP6_NF_SECURITY=y
+CONFIG_IP6_NF_TARGET_HL=y
+CONFIG_IP6_NF_TARGET_REJECT_SKERR=y
+CONFIG_DNS_RESOLVER=y
+CONFIG_IOSCHED_DEADLINE=y
+CONFIG_SUSPEND_TIME=y
+CONFIG_CONSOLE_TRANSLATIONS=y
+CONFIG_EVM=y
+CONFIG_INTEGRITY_SIGNATURE=y
+CONFIG_SECURITY_APPARMOR_BOOTPARAM_VALUE=1
+CONFIG_SECURITY_TOMOYO_MAX_ACCEPT_ENTRY=2048
+CONFIG_SECURITY_TOMOYO_MAX_AUDIT_LOG=1024
+CONFIG_SECURITY_TOMOYO_POLICY_LOADER="/sbin/tomoyo-init"
+CONFIG_SECURITY_TOMOYO_ACTIVATION_TRIGGER="/sbin/init"
+CONFIG_DEFAULT_MMAP_MIN_ADDR=32768
+CONFIG_DEFAULT_IOSCHED="deadline"
+CONFIG_EVM_HMAC_VERSION=2
+CONFIG_DEFAULT_SECURITY_APPARMOR=y
+
+
+## lxc configs: Verevka <verevka86@gmail.com>
+CONFIG_CGROUP_DEBUG=y
+CONFIG_CGROUP_WRITEBACK=y
+CONFIG_RD_BZIP2=y
+CONFIG_RD_LZMA=y
+CONFIG_RD_XZ=y
+CONFIG_BRIDGE_NETFILTER=y
+CONFIG_RAW_DRIVER=y
+CONFIG_CGROUP_PIDS=y
+CONFIG_POSIX_MQUEUE=y
+CONFIG_POSIX_MQUEUE_SYSCTL=y
+CONFIG_IP6_NF_NAT=y
+CONFIG_CGROUP_NET_CLASSID=y
+CONFIG_SQUASHFS=y
+CONFIG_SQUASHFS_DECOMP_SINGLE=y
+CONFIG_SQUASHFS_XATTR=y
+CONFIG_SQUASHFS_ZLIB=y
+CONFIG_SQUASHFS_DECOMP_MULTI=y
+CONFIG_SQUASHFS_LZ4=y
+CONFIG_SQUASHFS_4K_DEVBLK_SIZE=y
+# CONFIG_SQUASHFS_LZ4 is not set
+CONFIG_SQUASHFS_LZO=y
+CONFIG_SQUASHFS_XZ=y
+# CONFIG_SQUASHFS_EMBEDDED is not set
+CONFIG_SQUASHFS_FRAGMENT_CACHE_SIZE=3
+CONFIG_SQUASHFS_FILE_DIRECT=y
+CONFIG_MISC_FILESYSTEMS=y
+CONFIG_XOR_BLOCKS=y
+CONFIG_RAID6_PQ=y
+CONFIG_LZ4_DECOMPRESS=y
+CONFIG_XZ_DEC=y
+CONFIG_XZ_DEC_X86=y
+CONFIG_XZ_DEC_POWERPC=y
+CONFIG_XZ_DEC_IA64=y
+CONFIG_XZ_DEC_ARM=y
+CONFIG_XZ_DEC_ARMTHUMB=y
+CONFIG_XZ_DEC_SPARC=y
+CONFIG_XZ_DEC_BCJ=y
+# CONFIG_XZ_DEC_TEST is not set
+CONFIG_DECOMPRESS_BZIP2=y
+CONFIG_DECOMPRESS_LZMA=y
+CONFIG_DECOMPRESS_XZ=y
+# LXC
+# --- Checkpoint/Restore ---
+CONFIG_CHECKPOINT_RESTORE=y
+CONFIG_NETLINK_DIAG=y
+CONFIG_PACKET_DIAG=y
+CONFIG_UNIX_DIAG=y
+CONFIG_INET_DIAG=y
+CONFIG_EVENTFD=y
+CONFIG_MACVLAN=y
+CONFIG_VLAN=y
+CONFIG_VLAN_8021Q=y
+CONFIG_CGROUP_NET_PRIO=y
+# --- Misc ---
+CONFIG_IP6_NF_TARGET_MASQUERADE=y
+CONFIG_NF_NAT_IPV6=y
+CONFIG_NF_NAT_IPV4=y
+
+## enable CONFIG_SW_SYNC_USER verevka <verevka86@gmail.com>
+CONFIG_SYNC=y
+CONFIG_SW_SYNC=y
+CONFIG_SW_SYNC_USER=y
+CONFIG_ONESHOT_SYNC=y
+CONFIG_FW_LOADER_USER_HELPER=y
+
+## Wireguard configs
+CONFIG_NET_UDP_TUNNEL=y
+CONFIG_CRYPTO_ALGAPI=y
+CONFIG_WIREGUARD=n
-- 
2.39.2

